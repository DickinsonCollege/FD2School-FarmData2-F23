<html>

<div id="vue_spike2" v-cloak>
    <body>
        <p>
        <h1>Harvest Report</h1>
        <p>This page is a <i>mockup</i> of a simplified harvest report.</p>

        
        <label for="title">Title:</label>
        <input v-model="title" type="text" id="title" name="title"/>
        
        <br>

        <div>
        <label for="startdate">Start:</label>
        <input type="date" id="startdate" name="start_date" 
            v-model ="startDate" min="2014-01-01" max="2022-01-01" />
        <label for="enddate">End:</label>
        <input type="date" id="startdate" name="start_date" 
            v-model ="endDate"  min="2020-05-05" max="2022-01-01" />
        </div>

        <br>

        <div>
        <label for="crops">Crop:</label>
        <select v-model="crops" id="crops" name="crops">
            <option v-for="crops in crops">{{ crops }}</option>
        </select>
        
        <label for="area">Area:</label>
        <select v-model="areas" id ="area" name="area">
            <option v-for="area in areas">{{ area }}</option>
          </select>
        </div>

        <br>

        <button type="button" v-on:click="saveReport" @click='changeState("activeReport")'>Generate Report</button>

        <hr>

        
        <v-cloak><h1>{{ title ? title : "Mock Harvest Report" }}</h1></v-cloak>
    

        <p>Details:</p>

        <ul>
        <li><strong>Farm:</strong>technologists</li>
        <li><strong>User:</strong>manager1</li>
        <li><strong>Language:</strong>English</li>
        </ul>

        <br>
        
        <ul>
            <li><strong>Start:</strong> {{ startDate }}</li>
            <li><strong>End:</strong> {{ endDate }}</li>
            <li><strong>Crop:</strong> {{ crops }}</li>
            </ul>

        <p v-if='state === "nullReport" || harvestLogs.length === 0'>There are no matching records</p>
        <div v-if='state === "activeReport" && !(harvestLogs.length === 0)' >
            <table border=1>
                <tr>
                  <th>Row</th>
                  <th>Date</th>
                  <th>Area</th>
                  <th>Crop</th>
                  <th>Yield</th>
                  <th>Units</th>
                </tr>
               <tr v-for="(cell,index) in harvestLogs"> 
                <td>{{ index + 1 }}</td> 
                <td>{{ cell.date }}</td> 
                <td>{{ cell.area }}</td> 
                <td>{{ cell.crop }}</td> 
                <td>{{ cell.yield }}</td> 
                <td>{{ cell.units }}</td>
              </tr>
              </table>
              

        </div>
    </body>
</div>

<script>
    var vueSpike = new Vue({
      el: "#vue_spike2",
      data: {
          state: "nullReport",
          title: "My Sample Harvest Report",
          startDate: "2020-05-05",
          endDate: "2020-05-15",
          crops: ["Kale", "Peas", "Broccoli"],
          areas: ["All", "Chuau-1", "SQ7"],
          harvestLogs: [
        ],
      },
      methods: {
            saveReport: function(){
                this.harvestLogs.push({date:"2018-05-01", area:"Orion-3", crop:"Kale", yield:12, units:"Bunches"});
            },
            changeState: function(newState){
                this.state = newState
            }

        }
    })
    Vue.config.devtools = true
  </script>

  </html>